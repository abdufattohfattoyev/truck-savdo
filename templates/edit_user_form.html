<div class="edit-user-form">
    <!-- Form Header -->
    <div class="d-flex justify-content-between align-items-center mb-3 border-bottom pb-2">
        <h4 class="mb-0 text-primary">
            <i class="bi bi-person-gear me-2"></i>Foydalanuvchi Tahrirlash
        </h4>
        <button type="button" class="btn-close" onclick="closeFormSidebar()" aria-label="Close"></button>
    </div>

    <form method="post" action="{% url 'edit_user' user.id %}" class="needs-validation" novalidate>
        {% csrf_token %}
        <!-- User Information Section -->
        <div class="card mb-3 border-0 shadow-sm">
            <div class="card-body">
                <h6 class="mb-3 text-secondary"><i class="bi bi-info-circle me-1"></i> Foydalanuvchi ma'lumotlari</h6>
                <div class="row g-2">
                    <div class="col-md-6">
                        <div class="form-floating mb-2">
                            <input type="text" name="username" class="form-control" id="id_username" placeholder="Username" value="{{ user.username }}" required>
                            <label for="id_username">Username</label>
                            <div class="invalid-feedback">Iltimos, username kiriting.</div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-floating mb-2">
                            <input type="password" name="password" class="form-control" id="id_password" placeholder="Yangi Parol">
                            <label for="id_password tá»‹ch

">Yangi Parol (ixtiyoriy)</label>
                        </div>
                    </div>
                    <div class="col-12">
                        <div class="form-floating mb-2">
                            <input type="email" name="email" class="form-control" id="id_email" placeholder="Email (ixtiyoriy)" value="{{ user.email|default_if_none:'' }}">
                            <label for="id_email">Email (ixtiyoriy)</label>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Form Actions -->
        <div class="d-flex gap-2 mt-3">
            <button type="button" class="btn btn-outline-secondary flex-grow-1" onclick="closeFormSidebar()">
                <i class="bi bi-x-circle me-1"></i> Bekor qilish
            </button>
            <button type="submit" class="btn btn-primary flex-grow-1">
                <i class="bi bi-save me-1"></i> Saqlash
            </button>
        </div>
    </form>
</div>

<style>
    .edit-user-form {
        padding: 1rem;
    }

    .form-floating > label {
        color: #5c6c75;
        font-size: 0.9rem;
    }

    .form-control {
        border-radius: 8px;
        padding: 0.75rem 1rem;
    }

    .form-control:focus {
        border-color: #86b7fe;
        box-shadow: 0 0 0 0.2rem rgba(13, 110, 253, 0.15);
    }

    .card {
        border-radius: 10px;
    }

    .btn {
        border-radius: 8px;
        padding: 0.75rem;
        font-weight: 500;
    }

    .btn-primary {
        background-color: #0d6efd;
        border-color: #0d6efd;
    }

    .btn-outline-secondary {
        border-color: #dee2e6;
    }

    .invalid-feedback {
        font-size: 0.8rem;
    }

    h6 {
        font-size: 0.95rem;
        font-weight: 600;
    }
</style>

<script>
    // Enable Bootstrap validation
    (function () {
        'use strict'

        var forms = document.querySelectorAll('.needs-validation')

        Array.prototype.slice.call(forms)
            .forEach(function (form) {
                form.addEventListener('submit', function (event) {
                    if (!form.checkValidity()) {
                        event.preventDefault()
                        event.stopPropagation()
                    }

                    form.classList.add('was-validated')
                }, false)
            })
    })()
</script>